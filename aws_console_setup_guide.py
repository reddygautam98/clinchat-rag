#!/usr/bin/env python3
"""
Complete AWS Console Setup Guide
Step-by-step instructions for creating AWS user and configuring permissions
"""

def show_aws_console_setup_guide():
    print("🚀 Complete AWS Console Setup Guide")
    print("=" * 60)
    
    print("\n📋 OVERVIEW")
    print("We'll create an IAM user with programmatic access for your ClinChat-RAG project.")
    print("This user will have permissions for S3, DynamoDB, ECS, ECR, and Load Balancers.")
    
    print("\n" + "="*60)
    print("STEP 1: ACCESS AWS CONSOLE")
    print("="*60)
    print("1. Open your web browser")
    print("2. Go to: https://console.aws.amazon.com/")
    print("3. Sign in with your AWS account (root account or existing IAM user)")
    print("4. Make sure you're in the correct region: US East (N. Virginia) us-east-1")
    print("   - Check the region selector in top-right corner")
    
    print("\n" + "="*60)
    print("STEP 2: NAVIGATE TO IAM SERVICE")
    print("="*60)
    print("1. In the AWS Console search bar, type 'IAM'")
    print("2. Click on 'IAM' service from the dropdown")
    print("3. You should see the IAM Dashboard")
    
    print("\n" + "="*60)
    print("STEP 3: CREATE NEW IAM USER")
    print("="*60)
    print("1. In the left sidebar, click 'Users'")
    print("2. Click the orange 'Create user' button")
    print("3. Enter user details:")
    print("   User name: clinchat-github-actions")
    print("   ✅ Check 'Provide user access to the AWS Management Console' (optional)")
    print("   ✅ Check 'I want to create an IAM user'")
    print("4. Set password options:")
    print("   ○ Autogenerated password")
    print("   ✅ Users must create a new password at next sign-in")
    print("5. Click 'Next'")
    
    print("\n" + "="*60)
    print("STEP 4: ATTACH PERMISSIONS (IMPORTANT!)")
    print("="*60)
    print("1. Select 'Attach existing policies directly'")
    print("2. Search and select these policies one by one:")
    print("   ✅ AmazonS3FullAccess")
    print("   ✅ AmazonDynamoDBFullAccess")
    print("   ✅ AmazonECS_FullAccess")
    print("   ✅ AmazonEC2ContainerRegistryFullAccess")
    print("   ✅ ElasticLoadBalancingFullAccess")
    print("   ✅ IAMReadOnlyAccess")
    print("   ✅ CloudWatchLogsFullAccess")
    print("   ✅ CloudFormationFullAccess")
    print("3. Click 'Next'")
    
    print("\n" + "="*60)
    print("STEP 5: REVIEW AND CREATE")
    print("="*60)
    print("1. Review all settings:")
    print("   - User name: clinchat-github-actions")
    print("   - Permissions: 7 policies attached")
    print("2. Click 'Create user'")
    print("3. ✅ User created successfully!")
    
    print("\n" + "="*60)
    print("STEP 6: CREATE ACCESS KEYS")
    print("="*60)
    print("1. Click on the newly created user 'clinchat-github-actions'")
    print("2. Click on 'Security credentials' tab")
    print("3. Scroll down to 'Access keys' section")
    print("4. Click 'Create access key'")
    print("5. Select use case: 'Application running outside AWS'")
    print("6. Click 'Next'")
    print("7. Add description tag (optional): 'ClinChat-RAG Project Keys'")
    print("8. Click 'Create access key'")
    
    print("\n" + "="*60)
    print("STEP 7: SAVE YOUR CREDENTIALS (CRITICAL!)")
    print("="*60)
    print("🚨 IMPORTANT: This is the ONLY time you'll see the Secret Access Key!")
    print("")
    print("1. Copy the Access Key ID")
    print("2. Click 'Show' and copy the Secret Access Key")
    print("3. Save both in a secure location")
    print("4. Click 'Done'")
    
    print("\n" + "="*60)
    print("STEP 8: UPDATE YOUR PROJECT")
    print("="*60)
    print("1. Open your .env.example file")
    print("2. Replace the AWS credentials:")
    print("   AWS_ACCESS_KEY_ID=YOUR_NEW_ACCESS_KEY_ID")
    print("   AWS_SECRET_ACCESS_KEY=YOUR_NEW_SECRET_ACCESS_KEY")
    print("   AWS_REGION=us-east-1")
    print("3. Save the file as .env")
    
    print("\n" + "="*60)
    print("STEP 9: TEST THE CONNECTION")
    print("="*60)
    print("Run these commands in your terminal:")
    print("1. python quick_aws_setup.py")
    print("2. python check_aws_status.py")
    
    print("\n" + "="*60)
    print("TROUBLESHOOTING TIPS")
    print("="*60)
    print("❌ If you get 'Access Denied' errors:")
    print("   - Verify all 7 policies are attached to the user")
    print("   - Check if the access keys are 'Active' status")
    print("")
    print("❌ If you get 'Invalid Token' errors:")
    print("   - Double-check you copied the keys correctly")
    print("   - Make sure there are no extra spaces or characters")
    print("")
    print("❌ If policies are missing:")
    print("   - Go back to IAM > Users > clinchat-github-actions > Permissions")
    print("   - Click 'Add permissions' > 'Attach existing policies directly'")
    print("   - Add any missing policies")
    
    print("\n" + "="*60)
    print("GITHUB SECRETS SETUP (NEXT STEP)")
    print("="*60)
    print("After AWS setup works locally, configure GitHub:")
    print("1. Go to: https://github.com/reddygautam98/clinchat-rag/settings/secrets/actions")
    print("2. Add these repository secrets:")
    print("   - AWS_ACCESS_KEY_ID (your new access key)")
    print("   - AWS_SECRET_ACCESS_KEY (your new secret key)")
    print("   - AWS_DEFAULT_REGION (us-east-1)")
    print("   - TF_STATE_BUCKET (clinchat-terraform-state-bucket)")
    
    print("\n🎉 Setup complete! Your AWS infrastructure will be ready to deploy.")

if __name__ == "__main__":
    show_aws_console_setup_guide()